\documentclass[../main.tex]{subfiles}
\begin{document}


    Oprócz adresu IP komputer ma
    przyporządkowaną \textbf{nazwę}. Konwencje nazywania komputerów:
    \begin{itemize}
        \item \textbf{nazwy hosta}\\
        W czasach gdy istniała sieć ARPAnet każdy komputer miał przydzieloną własną
        unikalną nazwę. Nazwy wszystkich komputerów były przechowywane w pliku HOSTS.TXT.
        Plik ten musiał być ręcznie aktualizowany i centralnie zarządzany oraz rozsyłany z centrum
        do lokalnych komputerów.
        \item \textbf{nazwy DNS}\\
        Domain Name System – system nazw domenowych, który jest rozproszonym systemem
        przechowującym informacje o nazwach komputerów i ich numerach IP. System ten zawiera
        mechanizmy tłumaczenia nazw. Dane DNS przechowywane są na serwerach nazw. Serwer DNS jest
        odpowiedzialny za swój fragment sieci i udostępnia swoje dane innym serwerom. DNS jest systemem hierarchicznym i jego strukturę można przedstawić w
        postaci drzewa. Termin domena DNS jest często utożsamiany z poddrzewem drzewa DNS. Dostęp do serwera DNS jest realizowany przez mechanizm określany czasem jako resolver.

        \item \textbf{nazwy NetBIOS}.

    \end{itemize}

    Istnieją mechanizmy tłumaczące nazwy na numery IP i odwrotnie.
    Ciałem odpowiedzialnym za koordynację nazw domen górnego poziomu a także
    odpowiedzialnym za przypisywanie adresów IP jest IANA Internet Assigned Numbers
    Authority.
    Ciałem nadzorującym od strony technicznej różne działania związane z uzyskiwaniem
    (rejestrowaniem) nazw domen, numerów Ip, numerów portów jest ICANN - Internet
    Corporation for Assigned Names and Numbers.

    \textbf{Domeny górnego poziomu}
    \begin{itemize}
        \item arpa - specjalna, wykorzystywana do odwzorowania adresów IP w nazwy.
        \item Domeny podstawowe (generic, gTLD), np: com, edu, gov.
        \item Domeny geograficzne (krajowe, country-code ccTLD), np: pl, uk, de.
    \end{itemize}

    \textbf{Domeny drugiego poziomu} - w wielu krajach domeny drugiego poziomu odzwierciedlają
    domeny organizacyjne pierwszego poziomu, ale ujmowane na swoim terytorium. Przykłady:
    edu.pl, com.pl, co.uk, ac.uk.

    W DNS (np. w plikach konfiguracyjnych) występują często tzw. \textbf{absolutne nazwy domeny},
    inaczej w pełni określone nazwy domeny (FQDN). FQDN jest to nazwa domeny zakończona kropką (np. ii.uj.edu.pl. ). Jeśli nazwa nie
    jest zakończona kropką, to może być jakoś uzupełniana.

    Obszar, inaczej \textbf{strefa} (zone) jest częścią systemu DNS, która jest oddzielnie administrowana.
    Domeny drugiego poziomu dzielone są na mniejsze strefy. Z kolei te strefy mogą być dalej
    dzielone. Występuje tu delegowanie zarządzania w dół struktury drzewa. Jednostka
    odpowiedzialna za zarządzanie daną strefą decyduje ile będzie serwerów DNS w strefie,
    rejestruje i udostępnia nazwy i numery IP nowych komputerów zainstalowanych w strefie.
    W tej chwili jest na świecie 13 (typów) serwerów głównych (najwyższego poziomu) zwanych
    po angielsku root-servers, posiadającymi nazwy od a.root-servers.net do m.root-servers.net.

    \textbf{Poszukiwania w DNS}
    \begin{itemize}
        \item Proste, „do przodu”– klient zna nazwę domenową, a chce uzyskać numer IP.
        \item Odwrotne (reverse) – klient zna adres IP i chce uzyskać nazwę domenową.
        Przeszukiwanie odwrotne wykorzystuje domenę arpa.in-addr. Jeśli chcemy
        poznać nazwę domenową komputera, to w systemie DNS adres ten
        jest reprezentowany jako specyficzna nazwa w domenie arpa.in-addr.
    \end{itemize}

    \subsection{Typy serwerów DNS}
    W każdej strefie musi być uruchomiony podstawowy serwer DNS oraz pewna liczba
    serwerów drugoplanowych, zapewniających usługi w razie awarii serwera podstawowego.
    Serwer podstawowy pobiera dane z pliku konfiguracyjnego, natomiast serwery
    drugoplanowe uzyskują dane od serwera podstawowego na drodze tzw. transferu strefy
    (zone transfer). Serwery drugoplanowe odpytują serwer podstawowy o dane w sposób
    regularny, zwykle co kilka godzin. Oprócz dwóch wymienionych rodzajów serwerów są
    jeszcze serwery podręczne (lokalne), których zadaniem jest zapamiętanie na pewien czas w
    pamięci podręcznej danych uzyskanych od innych serwerów tak, aby kolejne zapytania
    klientów mogły być obsłużone lokalnie.
    Serwery DNS działają na portach 53 UDP oraz 53 TCP. Na ogół w warstwie transportu
    używany jest UDP. Wyjątkiem jest m.in. transmisja danych z serwera podstawowego do
    drugoplanowego (większe porcje danych) oraz komunikaty w sieciach WAN. Również kiedy w
    odpowiedzi od serwera (przez UDP) ustawiony jest bit TC (patrz niżej) ponawiane jest
    zapytanie z wykorzystaniem TCP.

    \textbf{Podział ze względu na sposób uzyskania odpowiedzi poszukiwania}
    \begin{itemize}
        \item Przeszukiwanie rekurencyjne – klient oczekuje od serwera żądanej informacji. W przypadku,
        gdy serwer nie przechowuje żądanej informacji, sam znajduje ją na drodze wymiany
        komunikatów z innymi serwerami.
        \item  Przeszukiwanie iteracyjne – występuje między lokalnym serwerem DNS a innymi serwerami
        DNS. Jeśli odpytywany serwer nie zna szukanego adresu IP, odsyła pytającego do innych
        serwerów (odpowiedzialnych za daną domenę).
    \end{itemize}

    \textbf{Komunikacja klienta z serwerem DNS}\\
    Przy odwołaniu do nazwy domenowej system zwykle najpierw sprawdza, czy nie jest to
    nazwa hosta lokalnego, następnie sprawdza plik hosts - o ile istnieje. Jeśli nie znajdzie odpowiedniego wpisu, to
    wysyłane jest zapytanie do pierwszego serwera DNS (adres w pliku
    konfiguracyjnym).

    \textbf{Standardowy sposób poszukiwania}\\
    Klient pyta swój domyślny serwer DNS wysyłając zapytanie rekurencyjne.
    Odpytany serwer realizuje zapytania iteracyjne, zaczynając od serwerów głównych, które
    odsyłają do serwerów niższego poziomu.
    Mechanizm ten może się wydawać nieefektywny, ale w rzeczywistości dzięki temu, że
    serwery DNS zapamiętują na pewien czas informacje uzyskane z innych serwerów DNS
    (cache), często odpowiedź na zapytanie programu-klienta zostaje znaleziona bardzo szybko.

    \textbf{Dynamiczny DNS (DDNS)}\\
    Chyba najważniejsze wpisy w DNS dotyczą serwisów, np. www. Standardowo DNS obsługuje
    odwzorowanie nazw do statycznych adresów IP. Można jednak skonfigurować odwzorowanie dla adresów zmieniających się
    dynamicznie. W tym celu należy skorzystać z odpowiednich usługodawców w Internecie,
    którzy przypisują nazwę do swojego IP i pewnego numeru portu, następnie zapytanie
    przekierowują do komputera ze zmiennym IP z ewentualną zmianą portu. Na komputerze ze zmiennym IP należy
    zainstalować odpowiedni program (klient DDNS), który będzie powiadamiał serwer DDNS o
    zmianach adresu IP.
    Oddzielnym problemem, który należy rozwiązać, jest wykorzystanie serwera NAT i
    przypisywanie adresów prywatnych do serwisu w sieci. Na ogół wystarczy odpowiednie
    działanie klienta DDNS oraz odpowiednie skonfigurowanie serwera NAT.

    \subsection{Przykładowe konfiguracje serwerów DNS}
    Przykładowy plik /etc/resolv.conf (Unix)
    nameserver 149.156.78.3
    nameserver 149.156.78.95
    domain xx.yy.edu.pl
    Podstawowe wpisy to – po słowie nameserver – numery IP kolejnych serwerów DNS, które
    mają być odpytywane w przypadku braku odpowiedzi od poprzedniego.
    Linia ze słowem domain oznacza domenę domyślną (tzn. co ma być dołączone do nazwy
    hosta w przypadku, gdy nie określono domeny, np. ftp gandalf).
    Może się pojawić linia podobna do domain, ze słowem search, po którym jest (maksymalnie
    sześć) nazw domen. Taka linia oznacza, że poszukiwania mają być prowadzone dla nazw z
    dołączonymi kolejno nazwami podanych domen.


    Plik konfiguracyjny serwera named (bind): /etc/named.boot lub /etc/named.conf.
    Główną częścią BIND jest proces o nazwie „named”.
    Skonfigurowanie bind może polegać na utworzeniu m.in. pliku /etc/named.conf. Pliki te zawierają opcje działania programu i informacje o plikach
    stref.
    W zone lub options może się pojawić dyrektywa allow-query,
    która ogranicza adresy IP, z których mogą pochodzić zapytania.
    W katalogu /var/named należy utworzyć pliki stref, np. xx.yy.edu.pl
    Po każdorazowej zmianie w plikach konfiguracyjnych należy serwis restartować.
    Proces named powinien być startowany nie z prawami roota, tzn. należy utworzyć konto
    named, zamiast domyślnego shella.

    \subsection{Rekordy zasobów}
    Każdy serwer DNS przechowuje informacje o tej części obszaru nazw DNS, dla której jest
    autorytatywny (administratorzy są odpowiedzialni za poprawność informacji). Informacje
    zapisywane są w postaci tzw. rekordów zasobów.
    Dla zwiększenia wydajności serwer DNS może przechowywać również rekordy zasobów
    domen z innej części drzewa domen.
    \textbf{Istnieje szereg typów rekordów zasobów:}\\
    SOA (Start of Authority) Rekord uwierzytelnienia – pierwszy rekord w pliku
    strefy, określa podmiot odpowiedzialny od tego punktu hierarchii „w dół”.
    \begin{itemize}
        \item Serial – pole zawierające numer wersji pliku strefy, zwykle w polu tym odzwierciedlona jest
        data oraz numer wersji pliku w danym dniu.
        \item Refresh – określa jak często serwer pomocniczy ma sprawdzać na serwerze podstawowym,
        czy nie zachodzi potrzeba uaktualnienia plików.
        \item Retry – czas, po którym serwer pomocniczy będzie ponownie próbował odtworzyć dane po
        nieudanej próbie odświeżenia.
        \item Expire – maksymalny limit czasu, przez który serwer pomocniczy może utrzymywać dane w
        pamięci cache bez ich uaktualnienia.
        Minimum (Default TTL) – domyślny czas, jaki ma być użyty dla rekordów, które nie mają
        określonego TTL.
    \end{itemize}

    \subsection{DHCP - Dynamic Host Configuration Protocol}
    Wadą BOOTP jest statyczny sposób przydzielania numerów IP.
    Przydział dynamiczny umożliwia pracę (ale nie jednoczesną) wielu komputerów z
    przydzielonym jednym numerem IP.
    Serwer DHCP przydziela adresy IP dynamicznie. Obecnie w bardzo wielu sieciach lokalnych
    komputery nie mają na stałe wpisanych IP, ale pobierają IP od serwera DHCP w momencie
    startu systemu.
    Serwer DHCP może wykorzystywać różne sposoby przypisywania adresów:
    \begin{itemize}
        \item przydział statyczny IP do danego komputera (ustawienie „ręczne”, danemu adresowi
        MAC jest przypisywany stale jeden na stałe wybrany IP),
        \item automatyczny przydział statyczny przy pierwszym starcie komputera i kontakcie z
        serwerem,
        \item przydział dynamiczny, w którym serwer wynajmuje adres IP na określony czas.
        DHCP umożliwia budowanie systemów konfigurujących się automatycznie.
        Oprócz przydzielenia adresu IP serwer DHCP przesyła do komputera klienta również
    \end{itemize}


\end{document}